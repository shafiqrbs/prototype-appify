{"version":3,"file":"Dropzone.js","sources":["../src/Dropzone.tsx"],"sourcesContent":["import React from 'react';\nimport {\n  useDropzone,\n  FileRejection,\n  Accept,\n  FileWithPath,\n  DropEvent,\n  FileError,\n} from 'react-dropzone';\nimport {\n  Box,\n  BoxProps,\n  StylesApiProps,\n  factory,\n  ElementProps,\n  useProps,\n  useStyles,\n  createVarsResolver,\n  Factory,\n  MantineRadius,\n  LoadingOverlay,\n  getRadius,\n  MantineColor,\n} from '@mantine/core';\nimport { assignRef } from '@mantine/hooks';\nimport { DropzoneProvider } from './Dropzone.context';\nimport { DropzoneAccept, DropzoneIdle, DropzoneReject } from './DropzoneStatus';\nimport type { DropzoneFullScreenType } from './DropzoneFullScreen';\nimport classes from './Dropzone.module.css';\n\nexport type DropzoneStylesNames = 'root' | 'inner';\nexport type DropzoneVariant = 'filled' | 'light';\nexport type DropzoneCssVariables = {\n  root:\n    | '--dropzone-radius'\n    | '--dropzone-accept-color'\n    | '--dropzone-accept-bg'\n    | '--dropzone-reject-color'\n    | '--dropzone-reject-bg';\n};\n\nexport interface DropzoneProps\n  extends BoxProps,\n    StylesApiProps<DropzoneFactory>,\n    ElementProps<'div', 'onDrop'> {\n  /** Key of `theme.colors` or any valid CSS color to set colors of `Dropzone.Accept`, `theme.primaryColor` by default */\n  acceptColor?: MantineColor;\n\n  /** Key of `theme.colors` or any valid CSS color to set colors of `Dropzone.Reject`, `'red'` by default */\n  rejectColor?: MantineColor;\n\n  /** Key of `theme.radius` or any valid CSS value to set `border-radius`, numbers are converted to rem, `theme.defaultRadius` by default */\n  radius?: MantineRadius;\n\n  /** Determines whether files capturing should be disabled, `false` by default */\n  disabled?: boolean;\n\n  /** Called when any files are dropped to the dropzone */\n  onDropAny?(files: FileWithPath[], fileRejections: FileRejection[]): void;\n\n  /** Called when valid files are dropped to the dropzone */\n  onDrop(files: FileWithPath[]): void;\n\n  /** Called when dropped files do not meet file restrictions */\n  onReject?(fileRejections: FileRejection[]): void;\n\n  /** Determines whether a loading overlay should be displayed over the dropzone, `false` by default */\n  loading?: boolean;\n\n  /** Mime types of the files that dropzone can accepts. By default, dropzone accepts all file types. */\n  accept?: Accept | string[];\n\n  /** A ref function which when called opens the file system file picker */\n  openRef?: React.ForwardedRef<() => void | undefined>;\n\n  /** Determines whether multiple files can be dropped to the dropzone or selected from file system picker, `true` by default */\n  multiple?: boolean;\n\n  /** Maximum file size in bytes */\n  maxSize?: number;\n\n  /** Name of the form control. Submitted with the form as part of a name/value pair. */\n  name?: string;\n\n  /** Maximum number of files that can be picked at once */\n  maxFiles?: number;\n\n  /** Set to autofocus the root element */\n  autoFocus?: boolean;\n\n  /** If `false`, disables click to open the native file selection dialog */\n  activateOnClick?: boolean;\n\n  /** If `false`, disables drag 'n' drop */\n  activateOnDrag?: boolean;\n\n  /** If `false`, disables Space/Enter to open the native file selection dialog. Note that it also stops tracking the focus state. */\n  activateOnKeyboard?: boolean;\n\n  /** If `false`, stops drag event propagation to parents */\n  dragEventsBubbling?: boolean;\n\n  /** Called when the `dragenter` event occurs */\n  onDragEnter?(event: React.DragEvent<HTMLElement>): void;\n\n  /** Called when the `dragleave` event occurs */\n  onDragLeave?(event: React.DragEvent<HTMLElement>): void;\n\n  /** Called when the `dragover` event occurs */\n  onDragOver?(event: React.DragEvent<HTMLElement>): void;\n\n  /** Called when user closes the file selection dialog with no selection */\n  onFileDialogCancel?(): void;\n\n  /** Called when user opens the file selection dialog */\n  onFileDialogOpen?(): void;\n\n  /** If `false`, allow dropped items to take over the current browser window */\n  preventDropOnDocument?: boolean;\n\n  /** Set to true to use the File System Access API to open the file picker instead of using an <input type=\"file\"> click event, defaults to true */\n  useFsAccessApi?: boolean;\n\n  /** Use this to provide a custom file aggregator */\n  getFilesFromEvent?: (event: DropEvent) => Promise<Array<File | DataTransferItem>>;\n\n  /** Custom validation function. It must return null if there's no errors. */\n  validator?: <T extends File>(file: T) => FileError | FileError[] | null;\n}\n\nexport type DropzoneFactory = Factory<{\n  props: DropzoneProps;\n  ref: HTMLDivElement;\n  stylesNames: DropzoneStylesNames;\n  vars: DropzoneCssVariables;\n  staticComponents: {\n    Accept: typeof DropzoneAccept;\n    Idle: typeof DropzoneIdle;\n    Reject: typeof DropzoneReject;\n    FullScreen: DropzoneFullScreenType;\n  };\n}>;\n\nconst defaultProps: Partial<DropzoneProps> = {\n  loading: false,\n  multiple: true,\n  maxSize: Infinity,\n  autoFocus: false,\n  activateOnClick: true,\n  activateOnDrag: true,\n  dragEventsBubbling: true,\n  activateOnKeyboard: true,\n  useFsAccessApi: true,\n  variant: 'light',\n  rejectColor: 'red',\n};\n\nconst varsResolver = createVarsResolver<DropzoneFactory>(\n  (theme, { radius, variant, acceptColor, rejectColor }) => {\n    const acceptColors = theme.variantColorResolver({\n      color: acceptColor || theme.primaryColor,\n      theme,\n      variant: variant!,\n    });\n\n    const rejectColors = theme.variantColorResolver({\n      color: rejectColor || 'red',\n      theme,\n      variant: variant!,\n    });\n\n    return {\n      root: {\n        '--dropzone-radius': getRadius(radius),\n        '--dropzone-accept-color': acceptColors.color,\n        '--dropzone-accept-bg': acceptColors.background,\n        '--dropzone-reject-color': rejectColors.color,\n        '--dropzone-reject-bg': rejectColors.background,\n      },\n    };\n  }\n);\n\nexport const Dropzone = factory<DropzoneFactory>((_props, ref) => {\n  const props = useProps('Dropzone', defaultProps, _props);\n  const {\n    classNames,\n    className,\n    style,\n    styles,\n    unstyled,\n    vars,\n    radius,\n    disabled,\n    loading,\n    multiple,\n    maxSize,\n    accept,\n    children,\n    onDropAny,\n    onDrop,\n    onReject,\n    openRef,\n    name,\n    maxFiles,\n    autoFocus,\n    activateOnClick,\n    activateOnDrag,\n    dragEventsBubbling,\n    activateOnKeyboard,\n    onDragEnter,\n    onDragLeave,\n    onDragOver,\n    onFileDialogCancel,\n    onFileDialogOpen,\n    preventDropOnDocument,\n    useFsAccessApi,\n    getFilesFromEvent,\n    validator,\n    rejectColor,\n    acceptColor,\n    ...others\n  } = props;\n\n  const getStyles = useStyles<DropzoneFactory>({\n    name: 'Dropzone',\n    classes,\n    props,\n    className,\n    style,\n    classNames,\n    styles,\n    unstyled,\n    vars,\n    varsResolver,\n  });\n\n  const { getRootProps, getInputProps, isDragAccept, isDragReject, open } = useDropzone({\n    onDrop: onDropAny,\n    onDropAccepted: onDrop,\n    onDropRejected: onReject,\n    disabled: disabled || loading,\n    accept: Array.isArray(accept) ? accept.reduce((r, key) => ({ ...r, [key]: [] }), {}) : accept,\n    multiple,\n    maxSize,\n    maxFiles,\n    autoFocus,\n    noClick: !activateOnClick,\n    noDrag: !activateOnDrag,\n    noDragEventsBubbling: !dragEventsBubbling,\n    noKeyboard: !activateOnKeyboard,\n    onDragEnter,\n    onDragLeave,\n    onDragOver,\n    onFileDialogCancel,\n    onFileDialogOpen,\n    preventDropOnDocument,\n    useFsAccessApi,\n    validator,\n    ...(getFilesFromEvent ? { getFilesFromEvent } : null),\n  });\n\n  assignRef(openRef, open);\n\n  const isIdle = !isDragAccept && !isDragReject;\n\n  return (\n    <DropzoneProvider value={{ accept: isDragAccept, reject: isDragReject, idle: isIdle }}>\n      <Box\n        {...others}\n        {...getRootProps({ ref })}\n        {...getStyles('root', { focusable: true })}\n        mod={{\n          accept: isDragAccept,\n          reject: isDragReject,\n          idle: isIdle,\n          loading,\n          'activate-on-click': activateOnClick,\n        }}\n      >\n        <LoadingOverlay visible={loading} overlayProps={{ radius }} unstyled={unstyled} />\n        <input {...getInputProps()} name={name} />\n        <div {...getStyles('inner')} data-disable-pointer-events={!activateOnClick || undefined}>\n          {children}\n        </div>\n      </Box>\n    </DropzoneProvider>\n  );\n});\n\nDropzone.classes = classes;\nDropzone.displayName = '@mantine/dropzone/Dropzone';\nDropzone.Accept = DropzoneAccept;\nDropzone.Idle = DropzoneIdle;\nDropzone.Reject = DropzoneReject;\n"],"names":[],"mappings":"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"}